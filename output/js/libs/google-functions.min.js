function loadAPI(e){addScript("https://maps.googleapis.com/maps/api/js?libraries=places&callback="+e)}function init(){var e="object"==typeof google&&"object"==typeof google.maps;null!=googleMapElm?e?renderGoogleMap():window.onload=loadAPI("renderGoogleMap"):null!=autoCompleteElem&&(e?initialize():window.onload=loadAPI("initialize"))}function geolocate(){if(!navigator.geolocation){var e=new google.maps.LatLng((-24.994167),134.866944);return e}navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude},t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),a=new google.maps.Circle({center:t,radius:e.coords.accuracy});return null!=autoCompleteElem&&autocomplete.setBounds(a.getBounds()),o})}function renderGoogleMap(){map=new google.maps.Map(googleMapElm,{zoom:0,styles:mapStyle,mapTypeControl:!1,draggable:isDraggable});geolocate();null!=autoCompleteElem&&(autocomplete=new google.maps.places.Autocomplete(autoCompleteElem,{types:["geocode"]}),autocomplete.addListener("place_changed",function(){var e=autocomplete.getPlace();if(!e.geometry)return void window.alert("Autocomplete's returned place contains no geometry");var o={Latitude:e.geometry.location.lat(),Longitude:e.geometry.location.lng()};o=JSON.stringify(o),CallStoreLookup(o,this)})),setMarkerPoints(map)}function storeLookupCallback(e,o){var t=JSON.parse(e);setMarkerPoints(map,t)}function setMapOnAll(e){for(var o=0;o<markers.length;o++)markers[o].setMap(e)}function setMarkerPoints(e,o){var t=new google.maps.LatLngBounds,a=void 0!==o?o:locationData;0!==a.length&&a.forEach(function(o,n){function l(){var o=google.maps.event.addListener(e,"bounds_changed",function(e){this.getZoom()&&this.setZoom(16)});setTimeout(function(){google.maps.event.removeListener(o)},2e3)}function i(o,t){return"false"!==hasInfoWindow&&(infowindow&&infowindow.close(),void(1!=t&&(infowindow=new google.maps.InfoWindow,infowindow.setContent(c),infowindow.open(e,o))))}var r=new google.maps.LatLng(o.placeLatitude,o.placeLongitude);t.extend(r);var s={path:iconPaths,fillColor:"#00447B",fillOpacity:1,anchor:new google.maps.Point(210,595),strokeWeight:0,scale:.06},o=new google.maps.Marker({position:r,map:e,title:o.StoreName+" "+o.StoreDetail,icon:s,placeID:o.placeID,storeName:o.StoreName,storeDetail:o.StoreDetail,directions:o.StoreDirection}),c="Test";markers.push(o),e.fitBounds(t),1==a.length&&l(),google.maps.event.addListener(o,"click",function(){for(var t=0;t<markers.length;t++){var a=o.getIcon();a.fillColor="#00447B",markers[t].setIcon(a)}var n=o.getIcon();n.fillColor="#2CBAAA",o.setIcon(n),i(o,!1),e.panTo(o.getPosition())}),google.maps.event.addListener(e,"click",function(){i(null,!0);for(var e=0;e<markers.length;e++){var t=o.getIcon();t.fillColor="#00447B",markers[e].setIcon(t)}}),google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(e,"resize"),e.fitBounds(t),1==a.length&&l()})}),e.fitBounds(t)}function initialize(){autocompleteFeild=document.querySelector(".jq-places-autocomplete"),updateFields=document.querySelectorAll(".jq-ac-fields"),aria=document.querySelector(".jq-aria-ac"),geolocate(),google.maps.event.addListener(autocomplete,"place_changed",function(){fillInAddress()})}function fillInAddress(){var e=autocomplete.getPlace();forEach(updateFields,function(e,o){o.value="",o.disabled=!1});for(var o=0;o<e.address_components.length;o++){var t=e.address_components[o].types[0],a=document.querySelector("[data-ac-field='"+t+"']");if("subpremise"==t||"street_number"==t||"route"==t||"sublocality_level_1"==t){var n,a=document.querySelector("[data-ac-field='address']");n="subpremise"==t?e.address_components[o].long_name+" /":""!=a.value?a.value+" "+e.address_components[o].long_name:e.address_components[o].long_name,a.value=n}else{var a=document.querySelector("[data-ac-field='"+t+"']");null!=a&&(a.value=e.address_components[o].long_name)}}}function locationClick(e){forEach(markers,function(o,t){t.placeID===parseInt(e)&&(google.maps.event.trigger(t,"click"),map.setZoom(16))})}var mapStyle=[{featureType:"all",stylers:[{saturation:0},{hue:"#e7ecf0"}]},{featureType:"road",stylers:[{saturation:-70}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{saturation:-60}]}],iconPaths="M71.1 64.1c41.5-40.6 91.4-61 149.7-61 58.3 0 108.2 20.3 149.7 61 41.5 40.6 62.3 89.7 62.3 147.1 0 45.9-17.7 101.2-53 165.7 -35.3 64.5-70.7 117.5-106 159l-53 61c-6.2-6.2-13.9-14.8-23.2-25.8 -9.3-11.1-26.1-32.5-50.4-64.3C123 474.9 101.6 444 83.1 414c-18.6-30-35.6-64-51-102C16.6 274 8.8 240.4 8.8 211.2 8.8 153.8 29.6 104.8 71.1 64.1zM167.2 263.6c14.6 14.6 32.5 21.9 53.7 21.9s39.1-7.3 53.7-21.9c14.6-14.6 21.9-32 21.9-52.3 0-20.3-7.3-37.8-21.9-52.3C260 144.3 242.1 137 220.9 137s-39.1 7.3-53.7 21.9c-14.6 14.6-21.9 32-21.9 52.3C145.3 231.5 152.6 249 167.2 263.6z",markers=[],isDraggable=!!siteHelpers.mediaquery("desktop"),mapElement,input,map,autocompleteFeild,updateFields,aria,autocomplete,openElement,googleMapElm=document.querySelector(".js-google-map"),hasInfoWindow=googleMapElm.getAttribute("data-info-window"),infowindow,autoCompleteElem=document.querySelector(".jq-places-autocomplete"),locationBtn=document.querySelectorAll(".js-local-click");forEach(locationBtn,function(e,o){o.addEventListener("click",function(e){e.preventDefault(),forEach(locationBtn,function(e,o){o.classList.remove("is-active")}),this.classList.add("is-active"),locationClick(this.getAttribute("data-place-id"))},!1)});